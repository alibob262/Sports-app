<div class="form-container">
  <div class="form-header">
    <h2 class="form-title">Find a Team</h2>
  </div>
  
  <form (ngSubmit)="onSubmit()" class="request-form" #requestForm="ngForm">
    <!-- User Info -->
    <div class="form-field">
      <label for="userName">Your Name</label>
      <input id="userName" [value]="userName" readonly>
      <div class="form-hint">Your profile name</div>
    </div>

    <!-- Sport Selection -->
    <div class="form-field">
      <label for="sport">Sport</label>
      <select 
        id="sport" 
        [(ngModel)]="sport" 
        name="sport" 
        required 
        #sportField="ngModel"
        (change)="onSportChange()">
        <option value="" disabled selected>Select a sport</option>
        <option *ngFor="let sport of sports" [value]="sport.value">
          {{ sport.displayName }}
        </option>
      </select>
      <div class="form-hint">Select your preferred sport</div>
      <div *ngIf="sportField.invalid && (sportField.dirty || sportField.touched)" class="form-error">
        Please select a sport
      </div>
    </div>

    <!-- Position Selection (shown only when sport is selected) -->
    <div class="form-field" *ngIf="sport && availablePositions.length > 0">
      <label for="position">Position</label>
      <div class="position-options">
        <button
          *ngFor="let pos of availablePositions"
          type="button"
          class="position-pill"
          [class.selected]="position === pos.value"
          (click)="selectPosition(pos.value)">
          {{ pos.displayName }}
          <span *ngIf="position === pos.value" class="checkmark">âœ“</span>
        </button>
      </div>
      <input
        type="hidden"
        id="position"
        [(ngModel)]="position"
        name="position"
        required
        #positionField="ngModel"
      >
      <div *ngIf="positionField.invalid && (positionField.dirty || positionField.touched)" class="form-error">
        Please select a position
      </div>
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <button
        type="submit"
        [disabled]="!sport || !position || isSubmitting"
        class="submit-button"
      >
        <span class="button-content">
          <span *ngIf="!isSubmitting">Submit Request</span>
          <span *ngIf="isSubmitting" class="spinner"></span>
        </span>
      </button>
    </div>

    <!-- Status Message -->
    <div *ngIf="submitMessage" class="status-message" [class.success]="isSuccess" [class.error]="!isSuccess">
      <span class="status-icon material-icons">{{ isSuccess ? 'check_circle' : 'error' }}</span>
      <span class="status-text">{{ submitMessage }}</span>
    </div>
  </form>
</div>